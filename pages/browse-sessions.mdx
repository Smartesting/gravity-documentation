import Layout from '../components/layout'
import Alert, { AlertType } from '../components/ui/Alert'
import Image from 'next/image'

import imgSessionsFilter from '../public/img/browse-sessions/sessions-filter.png'
import imgSessionsFilterWildcard from '../public/img/browse-sessions/sessions-filter-wildcard.png'
import imgSessionDetails from '../public/img/browse-sessions/session-details.png'
import imgSessionTraitsFilter from '../public/img/browse-sessions/sessions-traits-filter.png'

export const meta = {
  headerTitle: 'Browsing sessions'
}

The **Sessions** section of Gravity allows you to browse the recorded sessions and have a first glimpse into how your application is used.

## Finding sessions

By default, all the sessions ever collected are displayed and grouped by environments (user/test).

Filters are the first way to make sense of these data:

<Image
    src={imgSessionsFilter}
    alt="You can filter sessions from the sessions page"
  />

You can easily find sessions containing a specific page or a sequence of pages. It helps you focus your exploration of a workflow.

<Alert type={AlertType.info}>
  You can only filter on pages recorded by the collector. Free-form filters are not (yet) possible.
</Alert>

### How about URLs with a dynamic segment?

When you need to filter on a "type" of pages rather than a "specific" page,
you can replace the flexible part of the URL with a wildcard character ("*").

A common example would be filtering on generic "product pages" (```/products/<any product>```) rather than "a specific product page" (```/products/my-awesome-product```).

<Image
    src={imgSessionsFilterWildcard}
    alt="A filter using a wildcard"
  />

## Segmenting sessions

You may want to give more business context to your sessions. For example, you would like to work only on sessions coming from a specific type of users (like "paying users" or "connected users", ...).
Gravity allows you to add __traits__ to your sessions so you can easily retrieve data for a given context.

To learn about how to add those traits, please see the [gravity-data-collector documentation](https://github.com/Smartesting/gravity-data-collector#identify-sessions-with-traits)

Once you have collected a few sessions with traits set, this area will appear in the filter section:

<Image
    src={imgSessionTraitsFilter}
    alt="Filtering by 'connected' trait"
  />

Select a trait and a value to display only sessions matching the filter.

<Alert type={AlertType.info} title="Restrictions">
  A trait value can only be a number, a string or a boolean (```true/false```). You can not give a complex value to a trait, like an object or an array.
  Note that the value is limited to 255 characters.
</Alert>

## Session details

On a session page, you will find every information to reproduce the journey of a user of your application.

<Image
    src={imgSessionDetails}
    alt="A session page, containing all the data recorded during the current session"
  />

The pages they visited are displayed in chronological order.
For each page visit, the list of user actions is displayed. You can expand a user action to display its metadata (see [Getting Started - Metadata](/getting-started#metadata)).

export default ({ children }) => <Layout meta={meta}>{children}</Layout>
